# Timelog

* Project Name: Pascal to JVM compiler
* Student Name: Yao Du
* Student ID: 2359451d
* Supervisor Name: Simon J Gay

## Guidance

* This file contains the time log for your project. It will be submitted along with your final dissertation.
* **YOU MUST KEEP THIS UP TO DATE AND UNDER VERSION CONTROL.**
* This timelog should be filled out honestly, regularly (daily) and accurately. It is for *your* benefit.
* Follow the structure provided, grouping time by weeks.  Quantise time to the half hour.

## Week 1

### 21 Sep 2021

* *8 hours* Go over proposed projects and made decision

## Week 2

### 27 Sep 2021

* *3 hours* Read the project guidance notes and other information given on moodle
* *1 hour* Set up Github level 4 dissertation & record & source-code repository and essential documents and information added(timelog, status_report)
* *1 hour* Create issues & milestones related to each level 4 repo

### 28 Sep 2021

* *1 hour* Look through the basic concepts of how java programes converted into bytecodes (what's the role of JVM in this process) and hello world example of how to analyze the bytecodes
* *1 hour* Fix submodule indexing problem, removed the submodules of other repos as it always related to the attached HEAD
* *2 hours* Write the questions for meeting later on, regarding the general questions and project-related question (starting point etc.)

### 30 Sep 2021

* *1 hour* Revise PL course

### 3 Oct 2021

* *3 hours* Revise PL course

## Week 3

### 4 Oct 2021

* *3 hours* Revise PL course & prepare the weekly report(quetions, progress) for the supervisor meeting
* *0.5 hour* Hold the 1st meeting with the supervisor
* *0.5 hour* Organise the 1st meeting minutes

### 9 Oct 2021

* *5 hours* Revise PL course & other basic concepts (DFA, NFA, CFG)

## Week 4

### 11 Oct 2021

* *0.5 hour* Hold the 2nd meeting with supervisor
* *0.5 hour* Organise the 2nd meeting minutes

### 16 Oct 2021

* *5 hours* Research through ANTLR, AST design patterns(interpreter, visitor, decorator etc.)

### 17 Oct 2021

* *1 hour* Research through ANTLR and revise Calc grammar and driver class. (think about the possibility of visualisation of the AST i.e. using existing library or something else)

## Week 5

### 18 Oct 2021

* *0.5 hour* Hold the 3rd meeting with supervisor

### 24 Oct 2021

* *5 hours* Research about ANTLR & read book *The Definitive ANTLR 4 Reference*

## Week 6

### 25 Oct 2021

* *0.5 hour* Organise the 3rd meeting minutes
* *0.5 hour* Hold the 4th meeting with supervisor

### 31 Oct 2021

* *0.5 hour* Organise the 4th meeting minutes

## Week 7

### 25 Oct 2021

* *0.5 hour* Hold the 5th meeting with supervisor

### 6 Nov 2021

* *1 hour* Read the book *The Definitive ANTLR 4 Reference*

### 7 Nov 2021

* *2 hours* Read the book *The Definitive ANTLR 4 Reference*
* *0.5 hour* Organise the 5th meeting minutes

## Week 8

### 8 Nov 2021

* *0.5 hour* Hold the 6th meeting with supervisor

### 13 Nov 2021

* *0.5 hour* Organise the 6th meeting minutes
* *2 hours* Setup basic files for source-code repo
  * might re-orgnise as goes, build guidance & scripts etc. to be done
  * currently components generated by IDEA-plugin(time-saving), where might worth using **antlr4-docker image** or the ordinary **jar file** to experiment with
* *3 hours* Revise docker, writing dockerfile & scripts for building antlr4

### 14 Nov 2021

* *1 hour* Organise source code repo

## Week 9

### 15 Nov 2021

* *0.5 hour* Hold the 7th meeting with supervisor

### 20 Nov 2021

* *1 hour* Refine Symbol table & continue work on contextual analysis
* *1 hour* Research about java compiler (static vairable space, how allocation works)
  * check whether this could somehow relate to Type Descriptor design (like is there any other information need to provide to the code generation stage). But seems there is no correlation for now...I suppose JVM would do the majority part of the vairable allocation...(variable size .etc)

### 21 Nov 2021

* *3 hours* Research more about symbol table & design pattern things. Label Pascal grammar for usage (there exists some confusing alternatives)

## Week 10

### 22 Nov 2021

* *0.5 hour* Hold the 8th meeting with supervisor

### 23 Nov 2021

* *0.5 hour* Research about Run-time lib of Pascal (How to conduct the contexual analysis when there are overloaded RTL defined, and the parameters are untyped implicitly)

### 27 Nov 2021

* *1 hour* Reorganise the project structure (it is not possible to build mixed-language project in IDEA, so about to process them seperately)
* *1 hour* Research about RTL(no gain), might worth researching more about overload resolution & parametric polymorphism, also check how others implementing compilers (especially how they deal with RTL builtin functions & overloaded). Suppose gonna refer the existing compiler RTL docs reference and write a "RTL" (support for symbol table)
* *0.5 hour* Same as above but organise again those blockers encountered in this stage, also some assumptions (at least try to make it work... mainly struggling about Func/Proc overloadded signatures [how to design a suitable type descriptor] & builtin Func/Proc [how exactly these defined in standard Pascal: overloaded signatures and arguments type restrictions...])

### 28 Nov 2021

* *0.5 hour* Research about the possible books which might help (more praticle examples, as currently blocked somehow in contextual analysis)
* *1.5 hours* Quick Look into how others process RT builtin func/proc when conducting semantic analysis
* *0.5 hour* Explore the design patterns for RTL (JVMClass should be a good reference, but would choose the straightforward implementation for now as still in experiment stage) 
* *4.5 hours* Contexual analysis coding

## Week 11

### 29 Nov 2021

* *0.5 hour* Hold the 9th meeting with supervisor

### 4 Dec 2021

* *6 hours* Contexual Analysis Coding

### 5 Dec 2021

* *6 hours* Contexual Analysis Coding

## Week 12

### 6 Dec 2021

* *0.5 hour* Hold the 10th meeting with supervisor

### 9 Dec 2021

* *1 hour* Contexual Analysis Coding

### 11 Dec 2021

* *1.5 hours* Contexual Analysis Coding

### 12 Dec 2021

* *4.5 hours* Contexual Analysis Coding & Writing simple TestCase (not sure testing in this form is necessary for this project or not, but just tried :) )

## Week 13

### 13 Dec 2021

* *3 hours* Writing Testing Case & Rules & Fixed Driver (where the token recognition errors won't be recorded before, due to `notifyListeners()` of original implementation `Lexer`)
* *0.5 hour* Hold the 11th meeting with supervisor

### 14 Dec 2021

* *4 hours* Contexual Analysis Coding

### 15 Dec 2021

* *1 hour* Contexual Analysis Coding

### 16 Dec 2021

* *1.5 hours* Desgin patterns
* *2.5 hours* Research about Testing & other concepts

### 17 Dec 2021

* *3 hours* Finalise status report

### 19 Dec 2021

* *2 hours* Refactor driver based on Builder Pattern

## Week 14 (Winter Break)

### 20 Dec 2021

* *3 hours* Write test cases & Go thorugh Junit5 tutorials

### 23 Dec 2021

* *4 hours* Fixed cicd pipeline, finalise basic parameterized test cases for testing 'parse' (where able to test a batch of source files)

## Week 15 (Winter Break)

### 29 Dec 2021

* *4 hours* Contextual analysis coding

### 30 Dec 2021

* *0.5 hour* Error type refactored, to make it more detailed and seperated from Type class

### 2 Jan 2022

* *3 hours* Contextual analysis coding & Refactor & Debug

## Week 16 (Winter Break)

### 3 Jan 2022

* *3 hours* Contextual analysis of the Enumerated types implementation refined

### 4 Jan 2022

* *4 hours* Subrange types implementation & basic operators checking refined for subrange & enumerated types (seperate compile time checking from the runtime checking)

## Week 13/1 (2nd Semester Begins)

### 11 Jan 2022

* *5 hours* array types coding & debug , issue #17

### 13 Jan 2022

* *7 hours* Debug & Type Classes Refactor, issue #75

### 14-15 Jan 2022

* *5 hours* issues #81, #85

### 16 Jan 2022

* *5 hours* procedure/function mutual recursion coding, bug fixed. Start record type implementation

## Week 14/2

### 17 Jan 2022

* *3 hours* Setup zotero, better bibtex plugins

### 22 Jan 2022

* *5.5 hours* Record type coding (packed record, variants left. some assignment correctness need to wait packed array to be finished), bug fixed (arrays indexing & record fielding operations in mess) issues: #92 #16

### 23 Jan 2022

* *3 hours* Packed array types, and string type coding (check for the packed array may not suitable for passing as the parameter would be left for now, as it mentioned in book but not ISO7185)

## Week 15/3

### 24 Jan 2022

* *0.5 hours* Hold the 12th meeting with supervisor
* *0.5 hours* Organise meeting minutes

### 30 Jan 2022

* *2 hours* Reading JVM specification & videos
* *9 hours* Pointer type coding & setup basic template code for runtime procedures/functions
* *2 hours* Experiment with HelloWorld bytecode

## Week 16/4

### 31 Jan 2022

* *0.5 hours* Hold the 13th meeting with supervisor

### 5 Feb 2022

* *7 hours* Reading JVM

## Week 17/5

### 6 Feb 2022

* *10 hours* Code generation - Basic Expression, Variable declaration, readln/read procedures

### 7 Feb 2022

* *0.5 hours* Hold the 14th meeting with supervisor

## Week 18/6

### 12-13 Feb 2022

* *27.5 hours* Code generation coding (expression for simple types partially done) & class refactored & classes abstraction refined

### 14 Feb 2022

* *0.5 hours* Hold the 14th meeting with supervisor
* *1.5 hours* Debugging refactored local variable table
* *2.5 hours* Research about invokeDynamic
* *1 hour* Reorganize dissertation structure

### 19 Feb 2022

* *2 hours* Debug and refactor write/writeln(), now it works with invokeDynamic (but the arugments provided is not the optimal)
* *3 hours* Debug Procedure declaration & Proc var decl

### 20 Feb 2022

* *5.5 hours* Debug Function Decl, Call and other part refactored

## Week 19/7

### 21 Feb 2022

* *5.5 hours* Read proc & Relational operators finished, works for all simple types
* *1.5 hours* If statement

### 22 Feb 2022

* *2.5 hours* polish if statement & start while statement
* *1 hour* for statement
* *0.5 hours* Hold the 15th meeting with supervisor

### 26 Feb 2022

* *1 hour* Bug fixed - #124

### 27 Feb 2022

* *3.5 hours* Fixed
  * Slot Number calculation bug.
  * Write, which also can print the value from a Function. 
  * Non-arg Procedure/Function bug, when called these subprograms with only Id, some of the context would be recognized as Variable Context (no way to change with generated AST, so need to call manually).
* *3.5 hours* Basic Code generation of Function/Procedure Reference Forwarding. Also, fixed errors in semantic analysis
* *1 hour* Code generation of repeat-statement

## Week 20/8

### 28 Feb 2022

* *0.5 hour* Hold the 16th meeting with supervisor

### 6 March 2022

* *4 hours*
  * Integrate with logging frameworks, (for maintaining, separating debug and other information) & code refactor, clean up
  * Setup semantic analysis regression test suite skeleton.
    * Still need work to separate contextual analysis test cases into smaller units

## Week 21/9

### 7 March 2022

* *0.5 hour* Hold the 17th meeting with supervisor

### 11 March 2022

* *3 hours* Code clean up & driver refactor

### 12 March 2022

* *4 hours* Research about compiler validation

### 13 March 2022

* *3 hours* Research about compiler validation
* *4 hours* Draft dissertation

## Week 22/10

### 14 March 2022

* *0.5 hour* Hold the 18th meeting with supervisor

### 15 March 2022

* *2 hours* Test case reduction, and reduction utils coding

### 18 March 2022

* *3 hours* Fixed CICD and docker scripts updated

### 19 March 2022

* *1 hour* Background research
* *3 hours* Fixed testing utilities & checker visitor bugs, continue test cases reduction
* *5 hours* Set up candidate compilers, continue test cases reduction
* *3 hours* Scripts coding, preparing for comparing the output between different compilers when running the test suite later on

### 20 March 2022

* *10 hours* Scripts coding (preprocessing & suppress compiler error outputs, in order to compare the difference later)

## Week 23/11

### 21 March 2022

* *1.5 hours* Scripts bug fixed, test cases refined (as some vague bugs reported by Pascal-p5, e.g. invalid variable identifiers declared)
* *3 hours* Redrafting Analysis part
* *0.5 hour* Hold the 19th meeting with supervisor
* *2 hours* Coding about Regression Test Results redirect to log file 
* *3 hours* Checker Debugging, Continue Test Case Reduction